const reactSnap=require("react-snap"),fs=require("fs"),path=require("path"),postsDir=path.resolve(__dirname,"../src/posts");let postSlugs=[];try{postSlugs=fs.readdirSync(postsDir).filter((file=>file.endsWith(".md"))).map((file=>`/blog/${path.basename(file,".md")}`))}catch(e){console.warn("Could not read posts directory for slug list",e)}console.log("Starting React Snap with custom configuration..."),defaultIncludes=["/","/blog","/collaboration","/crafted-calm","/designers","/how-we-work","/privacy","/productscollection","/sustainability","/terms"];const allIncludes=[...defaultIncludes,...postSlugs];console.log(`Found ${postSlugs.length} blog posts to pre-render:`),postSlugs.forEach(((slug,index)=>console.log(`  ${index+1}. ${slug}`))),console.log("Total routes to pre-render:",allIncludes.length),reactSnap.run({source:"dist",destination:"dist",minifyHtml:{collapseWhitespace:!1,removeComments:!1},inlineCss:!1,puppeteerArgs:["--no-sandbox","--disable-setuid-sandbox"],concurrency:1,skipThirdPartyRequests:!0,timeout:12e4,include:allIncludes,puppeteer:(()=>{const cfg={cache:!1};return process.env.CHROME_EXECUTABLE&&process.env.CHROME_EXECUTABLE.length&&(cfg.executablePath=process.env.CHROME_EXECUTABLE),cfg})(),headers:{"user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"},userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",fixWebpackChunksIssue:!1,removeBlobs:!0,waitFor:2e3,evaluateSnapshotScript:()=>new Promise((resolve=>{if(window.location.pathname.startsWith("/blog/")&&"/blog/"!==window.location.pathname){console.log("Processing blog post page:",window.location.pathname);const slug=window.location.pathname.split("/").pop();setTimeout((()=>{window.navigator.userAgent="ReactSnap";const checkContent=()=>{const articleElement=document.querySelector("article"),hasContent="true"===document.body.getAttribute("data-blog-content-loaded"),hasArticleContent=articleElement&&articleElement.textContent.trim().length>50;hasContent||hasArticleContent?(console.log("âœ… Blog content detected for:",slug),setTimeout(resolve,1500)):(console.log("Waiting for blog content to load for:",slug),setTimeout(checkContent,500))};checkContent()}),2e3)}else setTimeout(resolve,500)})),onError:error=>(console.error("React Snap encountered an error:",error),!0),enableLogging:!0}).then((()=>{console.log("React Snap completed successfully!")})).catch((error=>{console.error("React Snap error:",error),process.exit(0)}));